#!/bin/sh
SCRIPT=`realpath $0`
SCRIPTPATH=`dirname $SCRIPT`

git submodule update --init

cmake -DUA_ARCHITECTURE=freertosLWIP -DUA_ENABLE_AMALGAMATION=ON \
      -DUA_ENABLE_PUBSUB=OFF -DUA_ENABLE_PUBSUB_ETH_UADP=OFF -DUA_ENABLE_PUBSUB_DELTAFRAMES=OFF -DUA_ENABLE_PUBSUB_INFORMATIONMODEL=OFF \
      -DUA_ENABLE_PUBSUB_MQTT=OFF -DUA_ENABLE_ENCRYPTION=OFF -DUA_ENABLE_ENCRYPTION_MBEDTLS=OFF \
      -DUA_ENABLE_DISCOVERY=OFF -DUA_ENABLE_DISCOVERY_MULTICAST=OFF -DUA_NAMESPACE_ZERO=FULL \
      -DUA_FILE_NS0="${SCRIPTPATH}/Opc.Ua.NodeSet2.Custom.xml" ../ && make || true

mkdir -p custom && mv open62541.* custom/
git clean -Xdf

cmake -DUA_ARCHITECTURE=freertosLWIP -DUA_ENABLE_AMALGAMATION=ON \
      -DUA_ENABLE_PUBSUB=OFF -DUA_ENABLE_PUBSUB_ETH_UADP=OFF -DUA_ENABLE_PUBSUB_DELTAFRAMES=OFF -DUA_ENABLE_PUBSUB_INFORMATIONMODEL=OFF \
      -DUA_ENABLE_PUBSUB_MQTT=OFF -DUA_ENABLE_ENCRYPTION=OFF -DUA_ENABLE_ENCRYPTION_MBEDTLS=OFF \
      -DUA_ENABLE_DISCOVERY=OFF -DUA_ENABLE_DISCOVERY_MULTICAST=OFF -DUA_NAMESPACE_ZERO=FULL ../ && make || true

mkdir -p full && mv open62541.* full/
git clean -Xdf

cmake -DUA_ARCHITECTURE=freertosLWIP -DUA_ENABLE_AMALGAMATION=ON \
      -DUA_ENABLE_PUBSUB=OFF -DUA_ENABLE_PUBSUB_ETH_UADP=OFF -DUA_ENABLE_PUBSUB_DELTAFRAMES=OFF -DUA_ENABLE_PUBSUB_INFORMATIONMODEL=OFF \
      -DUA_ENABLE_PUBSUB_MQTT=OFF -DUA_ENABLE_ENCRYPTION=OFF -DUA_ENABLE_ENCRYPTION_MBEDTLS=OFF \
      -DUA_ENABLE_DISCOVERY=OFF -DUA_ENABLE_DISCOVERY_MULTICAST=OFF -DUA_NAMESPACE_ZERO=REDUCED ../ && make || true

mkdir -p reduced && mv open62541.* reduced/
git clean -Xdf

cmake -DUA_ARCHITECTURE=freertosLWIP -DUA_ENABLE_AMALGAMATION=ON \
      -DUA_ENABLE_PUBSUB=OFF -DUA_ENABLE_PUBSUB_ETH_UADP=OFF -DUA_ENABLE_PUBSUB_DELTAFRAMES=OFF -DUA_ENABLE_PUBSUB_INFORMATIONMODEL=OFF \
      -DUA_ENABLE_PUBSUB_MQTT=OFF -DUA_ENABLE_ENCRYPTION=OFF -DUA_ENABLE_ENCRYPTION_MBEDTLS=OFF \
      -DUA_ENABLE_DISCOVERY=OFF -DUA_ENABLE_DISCOVERY_MULTICAST=OFF -DUA_NAMESPACE_ZERO=MINIMAL ../ && make || true

mkdir -p minimal && mv open62541.* minimal/
git clean -Xdf
